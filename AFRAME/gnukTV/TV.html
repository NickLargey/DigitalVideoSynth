<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script src="../../pkgs/aframe/dist/aframe-master.min.js"></script>
    <script src="../../pkgs/aframe-physics-system/dist/aframe-physics-system.min.js"></script>
    <script type="application/json" src="./components/swap-videos.js"></script>
    <script type="text/javascript" src="./components/play-on-click.js"></script>
    <script type="text/javascript" src="./components/create-rooms.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.x/dist/aframe-environment-component.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <title>༼ つ ╹ ╹ ༽つ GNUk.lol ༼ つ ╹ ╹ ༽つ</title>
  </head>
  <body>
    <a-scene
      stats
      physics
      background="color: black"
      fog="type: exponential; color: white; density: .03"
      loading-screen="dotsColor: #ff00b4; backgroundColor: black; enabled: true"
      renderer="antialias: auto;
                   colorManagement: true;
                   sortTransparentObjects: true;
                   maxCanvasWidth: 3840;
                   maxCanvasHeight: 2160;"
    >
      <a-assets>
        <!-- Models -->
        <!-- <a-asset-item id="desk" src="./assets/desk/scene.gltf"></a-asset-item>
        <a-asset-item
          id="sony"
          src="./assets/sony_pvm-14l2_crt_tv/scene.gltf"
        ></a-asset-item> -->

        <a-asset-item
          id="cabinet"
          src="./assets/retro_tv_sony_trinitron/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="bed"
          src="./assets/stylized_bed/scene.gltf"
        ></a-asset-item>
        <a-asset-item
          id="wardrobe"
          src="./assets/wardrobe/scene.gltf"
        ></a-asset-item>

        <!-- Video -->
        <!-- <video
          id="men-who-make"
          preload="auto"
          src="./assets/videos/Devo - The Men Who Make The Music (1979).mp4"
          height="1"
          width="1"
          loop="true"
          crossorigin="anonymous"
          muted
        ></video> -->
        <video
          id="max"
          preload="auto"
          src="./assets/videos/MH_loop.mp4"
          height="1"
          width="1.1"
          loop="true"
          crossorigin="anonymous"
          muted
        ></video>

        <!-- Images. -->
        <img
          id="skyTexture"
          src="./assets/images/43324525450_71aee7f03e_o.jpg"
        />
        <img id="groundMoss" src="./assets/Ground037_1K-JPG/Ground037.png" />
        <img id="ground" src="./assets/images/floor.png" />
        <img id="skeletons" src="./assets/images/skeletons-fighting.png" />
        <img id="sed" src="./assets/images/sed.png" />
        <img id="rug" src="./assets/images/rug.png" />
      </a-assets>
      <!-- SKY -->
      <a-sky
        id="background"
        src="#skyTexture"
        theta-length="180"
        radius="30"
      ></a-sky>

      <!-- LIGHTS -->
      <a-light type="ambient" color="#fff"></a-light>
      <a-light type="point" color="red" position="-1 5 0"></a-light>
      <a-light type="point" color="blue" position="5 5 5"></a-light>
      <a-light type="point" color="green" position="-5 -5 -5"></a-light>
      <!-- ROOM -->
      <a-entity room scale="6 6 10" position="2 0 0"></a-entity>
      <!-- FLOOR -->
      <a-box
        src="#ground"
        repeat="12"
        height="15"
        width="12"
        depth=".1"
        position="-1 -0.1 0"
        rotation="-90 0 0"
        static-body
      ></a-box>
      <a-cylinder
        src="#groundMoss"
        radius="35"
        height="0.1"
        position="0 -0.2 0"
        static-body
      ></a-cylinder>
      <!-- SCENE MODEL RENDERING -->

      <a-gltf-model
        src="#cabinet"
        position="2 1 4.1"
        rotation="0 125 0"
        dynamic-body
        ><a-text
          value="Press the Spacebar to turn the TV On and Off!"
          anchor="center"
          scale="0.75 0.75 0.75"
          position="0 2.5 -.5"
          rotation="0 90 0"
        ></a-text
      ></a-gltf-model>

      <a-gltf-model
        src="#bed"
        position="-2.8 1 -3"
        rotation="0 90 0"
        scale="0.15 0.15 0.25"
        dynamic-body
      ></a-gltf-model>

      <a-gltf-model
        src="#wardrobe"
        position="-5.3 1 5.1"
        rotation="0 90 0"
        scale="0.85 0.85 0.85"
        dynamic-body
      ></a-gltf-model>

      <!-- SCENE VIDEO RENDERING -->
      <!-- TODO: Write Component to attach one plane to #cabinet -->
      <a-entity
        material="shader: flat; src: #max"
        geometry="primitive: plane; width: 0.82; height: .6;"
        rotation="0 -145 0"
        play-on-click
        visible="false"
        position="1.9 1.38 3.75"
      >
      </a-entity>
      <!-- <a-entity swap-video="videos: ./components/videos.json;"> </a-entity> -->

      <!-- Camera + Cursor. -->
      <a-entity id="rig" position="2 0 -12" rotation="0 180 0">
        <a-camera look-controls wasd-controls>
          <a-cursor
            id="cursor"
            animation__click="property: scale; from: 0.1 0.1 0.1; to: 1 1 1; easing: easeInCubic; dur: 150; startEvents: click"
            animation__clickreset="property: scale; to: 0.1 0.1 0.1; dur: 1; startEvents: animationcomplete__click"
            animation__fusing="property: scale; from: 1 1 1; to: 0.1 0.1 0.1; easing: easeInCubic; dur: 150; startEvents: fusing"
          ></a-cursor>
        </a-camera>
      </a-entity>
    </a-scene>
  </body>
</html>
